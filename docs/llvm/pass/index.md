# Pass

The LLVM pass framework is an important part of the LLVM system, because LLVM passes are where the most interesting parts of the compiler exist. Passes perform transformations and optimizations that make up the compiler, they build the analysis results that are used by these transformations, and they are, above all, a structuring technique for compiler code.

An LLVM pass can be regarded as a black box that takes LLVM IR as input and produces outputs depending on what kind the pass is. There're two kinds of passes: **transformation pass** and **analysis pass**. For a transformation pass, it modifies the input IR and produces the transformed IR. For an analysis pass, it does not modify the input IR, but it looks into the IR and produces certain information that describes some properties about the input IR. Transformation passes typically implement compiler optimizations, program transformation, program instrumentation and other tasks. Analysis passes typically provide necessary information for the transformation passes to work.

Real-world compilers usually rely on hundreds of passes that run one after another on the generated IR to complete optimization and code generation. This sequence of passes that run one after another is also called **the pipeline**. Note that different compiler configurations may end with different pipeline configurations, affecting the set of passes used and their execution order.

Passes can have **dependencies**. For example, a transformation pass cannot work until its required analysis passes have been run. Also, some transformation passes can invalidate cached code properties analyzed by a previous analysis pass. LLVM uses **pass managers** to manage available passes and schedule the pass pipeline properly onto the input IR. Unfortunately, due to historical reasons, LLVM has two flavors of pass managers at now: the new pass manager and the legacy pass manager. This wiki primarily talks about the new pass manager, and the LLVM community is migrating to the new pass manager and deprecating the legacy one.
